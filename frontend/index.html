<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgriBuddy ðŸŒ¿ | Crop Disease Chatbot</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #2e7d32;
      --primary-light: #4caf50;
      --primary-dark: #1b5e20;
      --secondary: #ff9800;
      --text: #333;
      --text-light: #666;
      --background: #f9f9f9;
      --white: #ffffff;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --radius: 12px;
      --chat-bg: #f0f4f8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--background);
      color: var(--text);
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 25px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--secondary), var(--primary-light));
    }

    header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    header p {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    .upload-section, .chat-section, .feature-card {
      background: var(--white);
      padding: 25px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .upload-area {
      border: 2px dashed var(--primary-light);
      border-radius: var(--radius);
      padding: 30px;
      text-align: center;
      margin-bottom: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .upload-area:hover {
      background-color: rgba(76, 175, 80, 0.05);
      transform: translateY(-2px);
    }

    .upload-area.active {
      background-color: rgba(76, 175, 80, 0.1);
      border-color: var(--primary);
    }

    .upload-icon {
      font-size: 48px;
      color: var(--primary-light);
      margin-bottom: 15px;
    }

    .upload-text h3 {
      color: var(--primary);
      margin-bottom: 5px;
    }

    .upload-text p {
      color: var(--text-light);
      font-size: 0.9rem;
    }

    .file-input {
      display: none;
    }

    .upload-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: var(--radius);
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .upload-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .upload-btn:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .preview-container {
      margin-top: 20px;
      display: none;
    }

    .preview-container.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .preview-image {
      max-width: 100%;
      max-height: 300px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display: block;
      margin: 0 auto;
    }

    .chat-section {
      display: flex;
      flex-direction: column;
      height: 500px;
      position: relative;
      overflow: hidden;
    }

    .chat-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
      position: relative;
    }

    .chat-header::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: var(--primary);
      border-radius: 3px;
    }

    .chat-header h3 {
      color: var(--primary);
    }

    .bot-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: var(--radius);
      background-color: var(--chat-bg);
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .message {
      padding: 12px 15px;
      border-radius: var(--radius);
      max-width: 85%;
      position: relative;
      animation: messageSlide 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .message.user {
      background-color: var(--primary-light);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 5px;
    }

    .message.bot {
      background-color: var(--white);
      color: var(--text);
      align-self: flex-start;
      border-bottom-left-radius: 5px;
    }

    .message-time {
      font-size: 0.7rem;
      opacity: 0.7;
      margin-top: 5px;
      text-align: right;
    }

    .message.bot .message-time {
      text-align: left;
    }

    .chat-input-container {
      display: flex;
      gap: 10px;
      align-items: center;
      background: var(--white);
      padding: 10px;
      border-radius: var(--radius);
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    }

    .chat-input {
      flex: 1;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: var(--radius);
      font-size: 1rem;
      transition: border-color 0.3s;
    }

    .chat-input:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
    }

    .chat-input-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .chat-input-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .features-section {
      margin-top: 40px;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .feature-card {
      text-align: center;
      transition: transform 0.3s ease;
      padding: 30px 20px;
      position: relative;
      overflow: hidden;
    }

    .feature-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .feature-icon {
      font-size: 36px;
      margin-bottom: 15px;
      color: var(--primary);
      background: rgba(76, 175, 80, 0.1);
      width: 70px;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      margin: 0 auto 15px;
    }

    .feature-card h3 {
      color: var(--primary);
      margin-bottom: 10px;
    }

    .feature-card p {
      color: var(--text-light);
      font-size: 0.9rem;
    }

    footer {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      color: var(--text-light);
      font-size: 0.9rem;
      border-top: 1px solid #eee;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes messageSlide {
      from { 
        opacity: 0;
        transform: translateY(10px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }

    .disease-info {
      background-color: #fff8e1;
      border-left: 4px solid var(--secondary);
      padding: 15px;
      margin-top: 15px;
      border-radius: 0 var(--radius) var(--radius) 0;
    }

    .disease-info h4 {
      color: var(--secondary);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .treatment-list {
      padding-left: 20px;
      margin-top: 10px;
    }

    .treatment-list li {
      margin-bottom: 5px;
    }

    .api-status {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
      font-size: 0.9rem;
    }

    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #4caf50;
      animation: pulse 2s infinite;
    }

    .status-indicator.offline {
      background-color: #f44336;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 10px 15px;
      background: var(--white);
      border-radius: var(--radius);
      align-self: flex-start;
      max-width: 70px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: var(--text-light);
      animation: typingAnimation 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) {
      animation-delay: -0.32s;
    }

    .typing-dot:nth-child(2) {
      animation-delay: -0.16s;
    }

    @keyframes typingAnimation {
      0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .suggestion-chip {
      background: rgba(76, 175, 80, 0.1);
      color: var(--primary);
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .suggestion-chip:hover {
      background: rgba(76, 175, 80, 0.2);
      transform: translateY(-2px);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-seedling"></i> AgriBuddy</h1>
      <p>Your AI-powered crop disease detection and management assistant</p>
    </header>
    
    <div class="main-content">
      <section class="upload-section">
        <h2>Upload Crop Image</h2>
        <p>Get instant diagnosis and treatment recommendations for crop diseases</p>
        
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon"><i class="fas fa-camera"></i></div>
          <div class="upload-text">
            <h3>Upload Image</h3>
            <p>Drag & drop or click to select an image of your crop</p>
          </div>
          <button class="upload-btn" id="uploadBtn">
            <i class="fas fa-cloud-upload-alt"></i>
            <span>Choose File</span>
          </button>
          <input type="file" id="imageInput" class="file-input" accept="image/*">
        </div>
        
        <div class="preview-container" id="previewContainer">
          <h3>Image Preview</h3>
          <img id="previewImage" class="preview-image" src="" alt="Preview">
          <button class="upload-btn" id="analyzeBtn" style="margin-top: 15px;">
            <i class="fas fa-search"></i>
            <span>Analyze Image</span>
          </button>
        </div>
        
        <div class="api-status">
          <div class="status-indicator" id="statusIndicator"></div>
          <span id="statusText">Checking API connection...</span>
        </div>
      </section>
      
      <section class="chat-section">
        <div class="chat-header">
          <div class="bot-avatar">
            <i class="fas fa-robot"></i>
          </div>
          <div>
            <h3>AgriBuddy Assistant</h3>
            <p style="font-size: 0.8rem; color: var(--text-light);">Online â€¢ Ready to help</p>
          </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
          <div class="message bot">
            <p>Hello! I'm AgriBuddy, your crop health assistant. Upload an image of your crop to get started with disease diagnosis, or ask me any questions about crop management.</p>
            <div class="message-time">Just now</div>
            
            <div class="suggestions">
              <button class="suggestion-chip">Common tomato diseases</button>
              <button class="suggestion-chip">Rice pest control</button>
              <button class="suggestion-chip">Soil nutrition tips</button>
            </div>
          </div>
        </div>
        
        <div class="chat-input-container">
          <input type="text" id="chatInput" class="chat-input" placeholder="Ask about crop diseases or management...">
          <button class="chat-input-btn" id="sendMessageBtn">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </section>
    </div>
    
    <section class="features-section">
      <h2 style="text-align: center; margin-bottom: 30px; color: var(--primary);">How AgriBuddy Helps Farmers</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-search"></i></div>
          <h3>Disease Detection</h3>
          <p>Identify crop diseases quickly with AI-powered image analysis</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-pills"></i></div>
          <h3>Treatment Plans</h3>
          <p>Get personalized treatment recommendations for detected diseases</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
          <h3>Prevention Tips</h3>
          <p>Learn how to prevent diseases before they affect your crops</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
          <h3>Growth Monitoring</h3>
          <p>Track your crop health and growth over time</p>
        </div>
      </div>
    </section>
    
    <footer>
      <p><i class="fas fa-seedling"></i> AgriBuddy | Empowering Farmers with AI Technology</p>
      <p>Â© 2025 AgriBuddy. All rights reserved.</p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DOM Elements
      const uploadArea = document.getElementById('uploadArea');
      const imageInput = document.getElementById('imageInput');
      const uploadBtn = document.getElementById('uploadBtn');
      const previewContainer = document.getElementById('previewContainer');
      const previewImage = document.getElementById('previewImage');
      const analyzeBtn = document.getElementById('analyzeBtn');
      const chatMessages = document.getElementById('chatMessages');
      const chatInput = document.getElementById('chatInput');
      const sendMessageBtn = document.getElementById('sendMessageBtn');
      const statusIndicator = document.getElementById('statusIndicator');
      const statusText = document.getElementById('statusText');
      
      // Upload button click triggers file input
      uploadBtn.addEventListener('click', () => {
        imageInput.click();
      });
      
      // Upload area click triggers file input
      uploadArea.addEventListener('click', () => {
        imageInput.click();
      });
      
      // Handle file selection
      imageInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          const reader = new FileReader();
          
          reader.onload = function(e) {
            previewImage.src = e.target.result;
            previewContainer.classList.add('active');
          }
          
          reader.readAsDataURL(this.files[0]);
        }
      });
      
      // Analyze button click
      analyzeBtn.addEventListener('click', function() {
        if (!previewImage.src) return;
        
        // Show loading state
        this.innerHTML = '<div class="loading"></div><span>Analyzing...</span>';
        this.disabled = true;
        
        // Simulate API call
        setTimeout(() => {
          // Reset button
          this.innerHTML = '<i class="fas fa-search"></i><span>Analyze Image</span>';
          this.disabled = false;
          
          // Add bot message with analysis
          addBotMessage(
            "Based on my analysis, your crop appears to have Early Blight. This is a common fungal disease affecting tomatoes and potatoes.",
            true
          );
          
          // Add disease info
          const diseaseInfo = document.createElement('div');
          diseaseInfo.className = 'disease-info';
          diseaseInfo.innerHTML = `
            <h4><i class="fas fa-info-circle"></i> Treatment Recommendations</h4>
            <p>For Early Blight, consider these treatments:</p>
            <ul class="treatment-list">
              <li>Apply copper-based fungicides</li>
              <li>Remove infected leaves promptly</li>
              <li>Improve air circulation around plants</li>
              <li>Avoid overhead watering</li>
            </ul>
          `;
          
          // Find the last bot message and append disease info
          const botMessages = document.querySelectorAll('.message.bot');
          const lastBotMessage = botMessages[botMessages.length - 1];
          lastBotMessage.appendChild(diseaseInfo);
          
          // Scroll to bottom
          scrollToBottom();
        }, 2000);
      });
      
      // Send message on button click
      sendMessageBtn.addEventListener('click', sendMessage);
      
      // Send message on Enter key
      chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
      
      // Function to send message
      function sendMessage() {
        const message = chatInput.value.trim();
        if (message === '') return;
        
        // Add user message
        addUserMessage(message);
        
        // Clear input
        chatInput.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Simulate bot response after delay
        setTimeout(() => {
          // Remove typing indicator
          removeTypingIndicator();
          
          // Add bot response
          let botResponse = getBotResponse(message);
          addBotMessage(botResponse);
          
          // Scroll to bottom
          scrollToBottom();
        }, 1500);
      }
      
      // Function to add user message
      function addUserMessage(text) {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message user';
        
        const messageText = document.createElement('p');
        messageText.textContent = text;
        
        const messageTime = document.createElement('div');
        messageTime.className = 'message-time';
        messageTime.textContent = getCurrentTime();
        
        messageDiv.appendChild(messageText);
        messageDiv.appendChild(messageTime);
        
        chatMessages.appendChild(messageDiv);
        scrollToBottom();
      }
      
      // Function to add bot message
      function addBotMessage(text, isAnalysis = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message bot';
        
        const messageText = document.createElement('p');
        messageText.textContent = text;
        
        const messageTime = document.createElement('div');
        messageTime.className = 'message-time';
        messageTime.textContent = getCurrentTime();
        
        messageDiv.appendChild(messageText);
        messageDiv.appendChild(messageTime);
        
        // Add suggestions for non-analysis messages
        if (!isAnalysis) {
          const suggestions = document.createElement('div');
          suggestions.className = 'suggestions';
          suggestions.innerHTML = `
            <button class="suggestion-chip">Preventive measures</button>
            <button class="suggestion-chip">Organic treatments</button>
            <button class="suggestion-chip">When to consult expert</button>
          `;
          messageDiv.appendChild(suggestions);
        }
        
        chatMessages.appendChild(messageDiv);
        scrollToBottom();
      }
      
      // Function to show typing indicator
      function showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'typing-indicator';
        typingDiv.id = 'typingIndicator';
        typingDiv.innerHTML = `
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        `;
        chatMessages.appendChild(typingDiv);
        scrollToBottom();
      }
      
      // Function to remove typing indicator
      function removeTypingIndicator() {
        const typingIndicator = document.getElementById('typingIndicator');
        if (typingIndicator) {
          typingIndicator.remove();
        }
      }
      
      // Function to get current time in HH:MM format
      function getCurrentTime() {
        const now = new Date();
        return now.getHours().toString().padStart(2, '0') + ':' + 
               now.getMinutes().toString().padStart(2, '0');
      }
      
      // Function to scroll to bottom of chat
      function scrollToBottom() {
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
      
      // Function to generate bot response based on user input
      function getBotResponse(message) {
        const lowerMessage = message.toLowerCase();
        
        if (lowerMessage.includes('tomato') || lowerMessage.includes('tomatoes')) {
          return "Tomatoes can be affected by several diseases like Early Blight, Late Blight, and Blossom End Rot. Proper spacing, adequate watering, and crop rotation can help prevent these issues.";
        } else if (lowerMessage.includes('rice')) {
          return "Common rice diseases include Blast, Sheath Blight, and Bacterial Leaf Blight. Using resistant varieties and proper water management are key prevention strategies.";
        } else if (lowerMessage.includes('pest') || lowerMessage.includes('insect')) {
          return "For pest control, consider integrated pest management (IPM) approaches. This includes biological controls, cultural practices, and selective pesticide use when necessary.";
        } else if (lowerMessage.includes('soil') || lowerMessage.includes('fertilizer')) {
          return "Soil health is crucial for crop productivity. Regular soil testing can help determine nutrient needs. Organic matter addition and proper pH balance are important for soil fertility.";
        } else if (lowerMessage.includes('weather') || lowerMessage.includes('climate')) {
          return "Weather conditions significantly impact crop health. Extreme temperatures, humidity, and rainfall can influence disease development. Consider local climate when planning your crop calendar.";
        } else {
          return "I understand you're asking about crop health. For specific advice, please upload an image of your affected crop or ask about a particular plant or disease.";
        }
      }
      
      // Simulate API status check
      setTimeout(() => {
        statusIndicator.className = 'status-indicator';
        statusText.textContent = 'API Connected â€¢ Ready for analysis';
      }, 2000);
      
      // Add event listeners to suggestion chips
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('suggestion-chip')) {
          const suggestionText = e.target.textContent;
          chatInput.value = suggestionText;
          sendMessage();
        }
      });
    });
  </script>
</body>
</html>